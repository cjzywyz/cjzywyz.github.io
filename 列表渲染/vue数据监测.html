<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../vue.js"></script>
</head>

<!-- 
    vue监视数据原理
        1. vue会监视 data 中所有层次的数据
        2. 如何检测对象中的数据？
            通过 setter 实时监视，且要在 new Vue 时就传入要检测的数据
            (1) 对象中后追加的属性，Vue 默认不做响应式处理
            (2) 如需给后添加的属性做响应式，请使用如下 API
                vue.set(target.propertyName/index.value) 或
                vm.$set(target.propertyName/index.value)
        3. 如何检测数组中的数据？
            通过包裹数据更新元素的方法实现，本质就是做了两件事：
                (1) 调用原生对应的方法对数据进行更新
                (2) 重新解析模板，进而跟新页面
        4. 在 Vue 修改数组中的某一个元素一定要用如下方法：
            1. 使用这些 API: push()、pop()、shift()、unshift()、splice()、sort()、reverse()
            2. Vue.set()或vm.$set()
        
        特别注意： vue.set()和vm.$set()不能给vm或vm的根数据对象添加属性！！！
 -->

<body>

    <div id="div">
        <button @click="nianlin = nianlin + 2">年龄+2</button>    <br/>
        <button @click="addsex">添加性别属性，默认值为'男'</button> <br/>
        <button @click="addfriends">在列表首位添加一个朋友</button> <br/>
        <button @click="splicefriends">修改第一个朋友的名字为张三</button> <br/>
        <button @click="pushhobby">添加一个爱好</button>   <br/>
        <button @click="splicehobby">修改第一个爱好的属性为'学习'</button>

        <h3>姓名:{{xingming}}</h3>
        <h3>年龄:{{nianlin}}</h3>
        <h3 v-if="student.sex">性别:{{student.sex}}</h3>
        <h3>爱好:</h3>
            <ul>
                <li v-for="(h,index) in this.hobby" :key="index">
                    {{h}}
                </li>
            </ul>
        <h3>朋友</h3>
            <ul>
                <li v-for="(f, index) in friends" :key="index">
                    {{f.name}}--{{f.age}}
                </li>
            </ul>
    </div>


    <script>
        var vm = new Vue({
            el:'#div',
            data:{
                
                xingming:'小明',
                nianlin: 18,
                student:{
            
                },
                hobby:['抽烟','喝酒','烫头'],
                friends:[
                    {name:'张三',age:'17'},
                    {name:'李四',age:'20'},
                    {name:'王五',age:'19'}
                ]
            },
            methods: {
                addsex(){
                    Vue.set(this.student,'sex','男')
                },
                addfriends(){
                    this.friends.unshift({name:'赵六',age:'15'})
                },
                splicefriends(){
                    this.friends[0].name = '小红'
                },
                pushhobby(){
                    this.hobby.push('看剧')
                },
                splicehobby(){
                    // this.hobby.splice(0,1,'动漫')
                    this.$set(this.hobby,[0],'动漫')
                }
            },
        })
    </script>
</body>
</html>